{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/profile/%5Bid%5D/page.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'next/navigation';\nimport { doc, getDoc, collection, query, where, orderBy, onSnapshot } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport type { User, Review } from '@/functions/src/types';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Star } from 'lucide-react';\nimport { Loader2 } from 'lucide-react';\nimport { StatsCard } from '@/components/dashboard/stats-card';\n\nconst RatingStars = ({ rating, className = '' }: { rating: number, className?: string }) => (\n  <div className=\"flex\">\n    {[...Array(5)].map((_, i) => (\n      <Star key={i} className={`h-5 w-5 ${className} ${i < rating ? 'fill-yellow-400 text-yellow-400' : 'fill-muted stroke-muted-foreground'}`} />\n    ))}\n  </div>\n);\n\nexport default function PublicProfilePage() {\n  const params = useParams();\n  const userId = Array.isArray(params.id) ? params.id[0] : params.id;\n\n  const [seller, setSeller] = useState<User | null>(null);\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!userId) {\n        setError(\"User ID not provided.\");\n        setLoading(false);\n        return;\n    };\n\n    const fetchSellerData = async () => {\n      try {\n        const userDocRef = doc(db, 'users', userId);\n        const userDoc = await getDoc(userDocRef);\n        if (userDoc.exists()) {\n          const userData = userDoc.data() as User;\n          setSeller(userData);\n          document.title = `Профіль ${userData.username} - ReefUA`;\n        } else {\n          setError(\"Продавця не знайдено.\");\n        }\n      } catch (err) {\n        setError(\"Помилка завантаження даних продавця.\");\n        console.error(err);\n      }\n    };\n\n    const unsubscribeReviews = onSnapshot(\n        query(collection(db, 'reviews'), where('sellerUid', '==', userId), orderBy('createdAt', 'desc')),\n        (snapshot) => {\n            setReviews(snapshot.docs.map(doc => doc.data() as Review));\n        },\n        (err) => {\n            setError(\"Помилка завантаження відгуків.\");\n            console.error(err);\n        }\n    );\n    \n    Promise.all([fetchSellerData()]).finally(() => setLoading(false));\n\n    return () => unsubscribeReviews();\n  }, [userId]);\n\n  if (loading) {\n    return <div className=\"container mx-auto py-8 flex justify-center items-center h-[calc(100vh-200px)]\"><Loader2 className=\"h-16 w-16 animate-spin text-primary\" /></div>;\n  }\n  \n  if (error) {\n    return <div className=\"container mx-auto py-8 text-center\"><h1 className=\"text-2xl font-bold text-destructive\">{error}</h1></div>;\n  }\n\n  if (!seller) {\n    return <div className=\"container mx-auto py-8 text-center\"><h1 className=\"text-2xl font-bold\">Профіль не знайдено.</h1></div>;\n  }\n  \n  const averageRating = seller.sellerRating ? seller.sellerRating.toFixed(1) : '0';\n  const totalReviews = seller.sellerReviewCount || 0;\n  const registrationDate = new Date(seller.createdAt).toLocaleDateString('uk-UA');\n  const fallbackInitial = seller.username ? seller.username[0].toUpperCase() : 'S';\n\n  return (\n    <div className=\"container mx-auto py-8\">\n      <div className=\"flex flex-col md:flex-row items-center md:items-start gap-6 mb-8\">\n        <Avatar className=\"h-24 w-24 md:h-32 md:w-32 border-4 border-primary shadow-lg\">\n          <AvatarImage src={seller.photoURL || undefined} alt={seller.username || 'User Avatar'} />\n          <AvatarFallback>{fallbackInitial}</AvatarFallback>\n        </Avatar>\n        <div className=\"text-center md:text-left mt-4 md:mt-0\">\n          <h1 className=\"text-3xl font-headline font-bold text-primary\">{seller.username}</h1>\n          <p className=\"text-sm text-muted-foreground\">Учасник з: {registrationDate}</p>\n          <div className=\"flex items-center gap-2 mt-2 justify-center md:justify-start\">\n             <RatingStars rating={seller.sellerRating || 0} />\n             <span className=\"font-bold text-lg\">{averageRating}</span>\n             <span className=\"text-muted-foreground\">({totalReviews} відгуків)</span>\n          </div>\n        </div>\n      </div>\n\n       <Card>\n        <CardHeader>\n          <CardTitle>Відгуки Покупців</CardTitle>\n          <CardDescription>Що говорять покупці про цього продавця.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {reviews.length > 0 ? (\n            reviews.map(review => (\n              <Card key={review.id} className=\"p-4 bg-secondary/50\">\n                <div className=\"flex items-start gap-4\">\n                  <Avatar className=\"h-9 w-9\">\n                    <AvatarFallback>{review.buyerUsername.substring(0,2).toUpperCase()}</AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex-grow\">\n                    <div className=\"flex items-center justify-between\">\n                      <h4 className=\"font-semibold\">{review.buyerUsername}</h4>\n                      <span className=\"text-xs text-muted-foreground\">{new Date(review.createdAt).toLocaleDateString('uk-UA')}</span>\n                    </div>\n                    <div className=\"my-1\"><RatingStars rating={review.rating} /></div>\n                    <p className=\"text-sm text-muted-foreground mb-1\">Лот: <span className=\"font-medium text-primary\">{review.lotName}</span></p>\n                    <p className=\"text-sm\">{review.comment}</p>\n                  </div>\n                </div>\n              </Card>\n            ))\n          ) : (\n             <p className=\"text-muted-foreground text-center py-10\">У цього продавця ще немає відгуків.</p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"file":"star.js","sources":["file:///home/user/studio/node_modules/lucide-react/src/icons/star.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z',\n      key: 'r04s7s',\n    },\n  ],\n];\n\n/**\n * @component @name Star\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEuNTI1IDIuMjk1YS41My41MyAwIDAgMSAuOTUgMGwyLjMxIDQuNjc5YTIuMTIzIDIuMTIzIDAgMCAwIDEuNTk1IDEuMTZsNS4xNjYuNzU2YS41My41MyAwIDAgMSAuMjk0LjkwNGwtMy43MzYgMy42MzhhMi4xMjMgMi4xMjMgMCAwIDAtLjYxMSAxLjg3OGwuODgyIDUuMTRhLjUzLjUzIDAgMCAxLS43NzEuNTZsLTQuNjE4LTIuNDI4YTIuMTIyIDIuMTIyIDAgMCAwLTEuOTczIDBMNi4zOTYgMjEuMDFhLjUzLjUzIDAgMCAxLS43Ny0uNTZsLjg4MS01LjEzOWEyLjEyMiAyLjEyMiAwIDAgMC0uNjExLTEuODc5TDIuMTYgOS43OTVhLjUzLjUzIDAgMCAxIC4yOTQtLjkwNmw1LjE2NS0uNzU1YTIuMTIyIDIuMTIyIDAgMCAwIDEuNTk3LTEuMTZ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/star\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Star = createLucideIcon('Star', __iconNode);\n\nexport default Star;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}