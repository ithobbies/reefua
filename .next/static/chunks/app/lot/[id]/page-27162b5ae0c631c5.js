(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{172:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},285:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>d});var r=a(5155),s=a(2115),l=a(9708),n=a(2085),i=a(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...o}=e,u=c?l.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:s,size:n,className:a})),ref:t,...o})});c.displayName="Button"},462:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},2085:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var r=a(2596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.$,n=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return l(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:i}=t,d=Object.keys(n).map(e=>{let t=null==a?void 0:a[e],r=null==i?void 0:i[e];if(null===t)return null;let l=s(t)||s(r);return n[e][l]}),c=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return l(e,d,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...c}[t]):({...i,...c})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},2666:(e,t,a)=>{Promise.resolve().then(a.bind(a,7536))},3054:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},3085:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(5155),s=a(2115),l=a(6126);let n=(0,a(157).A)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),i=e=>{let{endTime:t}=e,[a,i]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>{let e=new Date(t)-new Date,a="",r=!1,s=!1;if(e>0){let t=Math.floor(e/864e5),l=Math.floor(e/36e5%24),n=Math.floor(e/1e3/60%60),i=Math.floor(e/1e3%60);t>0?a="".concat(t,"д ").concat(l,"г ").concat(n,"хв"):l>0?a="".concat(l,"г ").concat(n,"хв ").concat(i,"с"):n>0?(a="".concat(n,"хв ").concat(i,"с"),r=!0):(a="".concat(i,"с"),r=!0,s=!0)}else a="Аукціон завершено";i(a),c(r),u(s)};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[t]);let m="secondary",x="";return"Аукціон завершено"===a?m="destructive":o?(m="destructive",x="animate-pulse-lighter"):d&&(m="default",x="animate-pulse"),(0,r.jsxs)(l.E,{variant:m,className:"w-full justify-center py-2 text-sm ".concat(x),children:[(0,r.jsx)(n,{className:"mr-2 h-4 w-4"}),a]})}},3158:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>d,Hj:()=>c,XI:()=>n,nA:()=>u,nd:()=>o});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...s})})});n.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});c.displayName="TableRow";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});o.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},5268:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},6104:(e,t,a)=>{"use strict";a.d(t,{Cn:()=>o,db:()=>c,j2:()=>d,yA:()=>i});var r=a(3915),s=a(3004),l=a(5317),n=a(1427);let i=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyAdTHghtC6EapiesS1beHswN5EHJaQ4DEo",authDomain:"reefua.firebaseapp.com",projectId:"reefua",storageBucket:"reefua.firebasestorage.app",messagingSenderId:"655785668574",appId:"1:655785668574:web:6db232c21f495107af374f"}),d=(0,s.xI)(i),c=(0,l.aU)(i),o=(0,n.Uz)(i,"us-central1")},6126:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(5155);a(2115);var s=a(2085),l=a(9434);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:a}),t),...s})}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(2115);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7536:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var r=a(5155),s=a(2115),l=a(6874),n=a.n(l),i=a(5695),d=a(5317),c=a(1427),o=a(6104),u=a(8437),m=a(7817),x=a(6766),h=a(285),f=a(157);let p=(0,f.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var v=a(3158),g=a(9434);let y=e=>{let{images:t,altText:a,dataAiHints:l}=e,[n,i]=(0,s.useState)(0);return t&&0!==t.length?(0,r.jsxs)("div",{className:"relative w-full aspect-[16/10] overflow-hidden rounded-lg shadow-lg group bg-muted",children:[t.map((e,t)=>(0,r.jsx)("div",{className:(0,g.cn)("absolute inset-0 transition-opacity duration-500 ease-in-out",t===n?"opacity-100 z-10":"opacity-0"),children:(0,r.jsx)(x.default,{src:e,alt:"".concat(a," - зображення ").concat(t+1),fill:!0,priority:0===t,className:"object-contain",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 1000px","data-ai-hint":l&&l[t]?l[t]:"coral detail"})},t)),t.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.$,{variant:"outline",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-background/50 hover:bg-background/80 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{i(e=>0===e?t.length-1:e-1)},"aria-label":"Попереднє зображення",children:(0,r.jsx)(p,{className:"h-6 w-6"})}),(0,r.jsx)(h.$,{variant:"outline",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-background/50 hover:bg-background/80 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{i(e=>e===t.length-1?0:e+1)},"aria-label":"Наступне зображення",children:(0,r.jsx)(v.A,{className:"h-6 w-6"})}),(0,r.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex space-x-2",children:t.map((e,t)=>(0,r.jsx)("button",{onClick:()=>i(t),"aria-label":"Перейти до зображення ".concat(t+1),className:(0,g.cn)("h-2 w-2 rounded-full transition-all",n===t?"bg-primary w-4":"bg-muted hover:bg-primary/50")},t))})]})]}):(0,r.jsx)("div",{className:"aspect-video w-full bg-muted rounded-lg flex items-center justify-center text-muted-foreground",children:"Немає зображень"})},b=e=>{let{label:t,value:a,icon:s}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-card rounded-md border",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[s&&(0,r.jsx)("span",{className:"mr-2 text-primary",children:s}),(0,r.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:[t,":"]})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-foreground",children:a})]})};var j=a(3085),N=a(2523),w=a(6695),A=a(5127),k=a(6126),S=a(172),C=a(8224);let M=(0,f.A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),T=(0,f.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),I=(0,f.A)("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),R=(0,f.A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),E=(0,f.A)("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);var P=a(3054),D=a(5268);let H=(0,f.A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),_=(0,f.A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var z=a(462);let O=e=>{let{rating:t,className:a,starClassName:s}=e,l=Math.floor(t);return(0,r.jsx)("div",{className:(0,g.cn)("flex items-center",a),children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(z.A,{className:(0,g.cn)("h-4 w-4 stroke-1",t<l?"fill-yellow-400 text-yellow-400":"fill-muted stroke-muted-foreground",s)},t))})};var U=a(7481);function B(){var e,t,a;let l=(0,i.useParams)(),x=Array.isArray(l.id)?l.id[0]:l.id,[f,p]=(0,s.useState)(null),[v,g]=(0,s.useState)(null),[z,B]=(0,s.useState)([]),[F,Z]=(0,s.useState)(!0),[V,$]=(0,s.useState)(null),[L,q]=(0,s.useState)(""),[Q,W]=(0,s.useState)(!1),{toast:X}=(0,U.dj)(),{user:G,loading:J}=(0,u.A)(),Y=(0,i.useRouter)(),{startChatFromLot:K,isStarting:ee}=(0,m.Y)();(0,s.useEffect)(()=>{if(!x)return;let e=(0,d.H9)(o.db,"lots",x),t=(0,d.aQ)(e,e=>{if(e.exists()){let t={...e.data(),id:e.id};p(t),document.title="".concat(t.name," - ReefUA");let a=(0,d.H9)(o.db,"users",t.sellerUid);(0,d.x7)(a).then(e=>{e.exists()&&g(e.data())})}else $("Лот не знайдено."),p(null);Z(!1)},e=>{console.error("Error fetching lot:",e),$("Не вдалося завантажити лот."),Z(!1)}),a=(0,d.rJ)(o.db,"lots",x,"bids"),r=(0,d.P)(a,(0,d.My)("timestamp","desc")),s=(0,d.aQ)(r,e=>{B(e.docs.map(e=>e.data()))});return()=>{t(),s()}},[x]);let et=async e=>{if(e.preventDefault(),!G)return void X({variant:"destructive",title:"Помилка",description:"Ви повинні увійти, щоб робити ставки."});if(!f)return;let t=parseInt(L,10),a=f.currentBid>0?f.currentBid+10:f.startPrice;if(isNaN(t)||t<a)return void X({variant:"destructive",title:"Помилка",description:"Ваша ставка має бути не менше ".concat(a," грн.")});W(!0);try{let e=(0,c.Qg)(o.Cn,"placeBid");await e({lotId:x,amount:t}),X({title:"Успіх!",description:"Вашу ставку успішно прийнято."}),q("")}catch(e){console.error("Error placing bid:",e),X({variant:"destructive",title:"Помилка ставки",description:e.message||"Сталася невідома помилка."})}finally{W(!1)}},ea=async()=>{if(G&&f){W(!0);try{let e=(0,c.Qg)(o.Cn,"buyNow");await e({lotId:x}),X({title:"Успіх!",description:"Ви успішно придбали лот! Перенаправляємо до вашого профілю."}),Y.push("/profile")}catch(e){console.error("Error buying now:",e),X({variant:"destructive",title:"Помилка покупки",description:e.message||"Сталася невідома помилка."})}finally{W(!1)}}};if(F||J)return(0,r.jsx)("div",{className:"container mx-auto py-8 text-center",children:(0,r.jsx)(S.A,{className:"h-16 w-16 animate-spin mx-auto text-primary"})});if(V)return(0,r.jsxs)("div",{className:"text-center py-20",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-destructive",children:V}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Можливо, він був проданий або видалений."}),(0,r.jsx)(h.$,{asChild:!0,className:"mt-4",children:(0,r.jsx)(n(),{href:"/auctions",children:"Повернутись до аукціонів"})})]});f||(0,i.notFound)();let er="active"===f.status&&new Date(f.endTime)>new Date,es=f.parameters&&Object.values(f.parameters).some(e=>e),el=f.currentBid>0?f.currentBid+10:f.startPrice,en=(null==G?void 0:G.uid)===f.sellerUid;return(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsx)(y,{images:f.images||[],altText:f.name}),(0,r.jsxs)(w.Zp,{children:[(0,r.jsx)(w.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(w.ZB,{className:"text-3xl font-headline",children:f.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsxs)(w.BT,{children:["Продавець: ",(0,r.jsx)(n(),{href:"/profile/".concat(f.sellerUid),className:"text-primary font-medium hover:underline",children:f.sellerUsername})]}),v&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(O,{rating:v.sellerRating||0}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",v.sellerReviewCount||0,")"]})]})]})]}),G&&!en&&(0,r.jsxs)(h.$,{variant:"outline",onClick:()=>{f&&K({lotId:f.id,lotName:f.name,lotImage:f.images[0],sellerUid:f.sellerUid,sellerName:f.sellerUsername})},disabled:ee,children:[ee?(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Повідомлення"]})]})}),es&&(0,r.jsxs)(w.Wu,{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 font-headline",children:"Параметри утримання:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(null==(e=f.parameters)?void 0:e.salinity)&&(0,r.jsx)(b,{icon:(0,r.jsx)(M,{className:"h-5 w-5"}),label:"Солоність",value:f.parameters.salinity}),(null==(t=f.parameters)?void 0:t.par)&&(0,r.jsx)(b,{icon:(0,r.jsx)(T,{className:"h-5 w-5"}),label:"PAR",value:f.parameters.par}),(null==(a=f.parameters)?void 0:a.flow)&&(0,r.jsx)(b,{icon:(0,r.jsx)(I,{className:"h-5 w-5"}),label:"Течія",value:f.parameters.flow})]}),(0,r.jsxs)(k.E,{variant:"destructive",className:"mt-6 p-3 text-sm w-full justify-center",children:[(0,r.jsx)(R,{className:"h-5 w-5 mr-2"}),"Без гарантії живого товару при доставці поштою."]})]})]}),f.description&&(0,r.jsxs)(w.Zp,{children:[(0,r.jsx)(w.aR,{children:(0,r.jsxs)(w.ZB,{className:"text-xl font-headline flex items-center",children:[(0,r.jsx)(E,{className:"mr-2 h-5 w-5"}),"Опис від продавця"]})}),(0,r.jsx)(w.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground whitespace-pre-line",children:f.description})})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsxs)(w.Zp,{children:[(0,r.jsx)(w.aR,{children:(0,r.jsx)(w.ZB,{className:"text-2xl font-headline",children:"Ставки"})}),(0,r.jsxs)(w.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[er?"Поточна ставка":"Фінальна ціна",":"]}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-primary",children:["sold"===f.status&&f.finalPrice?f.finalPrice:f.currentBid," грн"]})]}),(0,r.jsx)(j.A,{endTime:new Date(f.endTime)}),er?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{className:"space-y-3",onSubmit:et,children:[(0,r.jsx)(N.p,{type:"number",placeholder:"мін. ".concat(el," грн"),"aria-label":"Сума ставки",className:"text-base",value:L,onChange:e=>q(e.target.value),disabled:Q||!G||en}),(0,r.jsx)(h.$,{type:"submit",className:"w-full text-lg py-3",disabled:Q||J||!G||en,children:Q?(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Зробити ставку"}),en&&(0,r.jsx)("p",{className:"text-xs text-center text-red-500",children:"Ви не можете робити ставки на свій лот."})]}),f.buyNowPrice&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative my-2",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"або"})})]}),(0,r.jsx)(h.$,{type:"button",variant:"outline",className:"w-full text-lg py-3 border-accent text-accent hover:bg-accent/10 hover:text-accent",onClick:ea,disabled:Q||!G||en,children:Q?(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.A,{className:"mr-2 h-5 w-5"})," Купити зараз за ",f.buyNowPrice," грн"]})})]})]}):(0,r.jsx)("div",{className:"text-center py-4",children:f.winnerUid&&f.winnerUsername?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.A,{className:"h-10 w-10 text-yellow-500 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:"Переможець:"}),(0,r.jsx)("p",{className:"text-xl text-primary font-bold",children:(0,r.jsx)(n(),{href:"/profile/".concat(f.winnerUid),className:"hover:underline",children:f.winnerUsername})})]}):(0,r.jsx)("p",{className:"text-lg text-muted-foreground",children:"Аукціон завершено. Переможця не визначено."})})]})]}),(0,r.jsxs)(w.Zp,{children:[(0,r.jsx)(w.aR,{children:(0,r.jsx)(w.ZB,{className:"text-xl font-headline",children:"Історія ставок"})}),(0,r.jsx)(w.Wu,{children:z.length>0?(0,r.jsxs)(A.XI,{children:[(0,r.jsx)(A.A0,{children:(0,r.jsxs)(A.Hj,{children:[(0,r.jsxs)(A.nd,{children:[(0,r.jsx)(H,{className:"inline h-4 w-4 mr-1"}),"Учасник"]}),(0,r.jsxs)(A.nd,{children:[(0,r.jsx)(P.A,{className:"inline h-4 w-4 mr-1"}),"Ставка"]}),(0,r.jsxs)(A.nd,{children:[(0,r.jsx)(_,{className:"inline h-4 w-4 mr-1"}),"Час"]})]})}),(0,r.jsx)(A.BF,{children:z.map(e=>(0,r.jsxs)(A.Hj,{children:[(0,r.jsx)(A.nA,{children:e.username}),(0,r.jsxs)(A.nA,{className:"font-semibold",children:[e.amount," грн"]}),(0,r.jsx)(A.nA,{children:new Date(e.timestamp).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"})})]},e.bidId))})]}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ще ніхто не зробив ставку. Будьте першим!"})})]})]})]})})}},7817:(e,t,a)=>{"use strict";a.d(t,{ChatProvider:()=>o,Y:()=>u});var r=a(5155),s=a(2115),l=a(1427),n=a(6104),i=a(7481),d=a(8437);let c=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),{toast:x}=(0,i.dj)(),{user:h}=(0,d.A)(),f=async e=>{if((null==a?void 0:a.chatId)!=="".concat(e.lotId,"_").concat(null==h?void 0:h.uid)){m(!0);try{let t=(0,l.Qg)(n.Cn,"startOrGetChat"),{chatId:a}=(await t({lotId:e.lotId})).data;o({chatId:a,lotId:e.lotId,lotName:e.lotName,lotImage:e.lotImage,otherParticipant:{uid:e.sellerUid,username:e.sellerName}})}catch(e){x({variant:"destructive",title:"Помилка чату",description:e.message||"Не вдалося почати чат."}),o(null)}finally{m(!1)}}};return(0,r.jsx)(c.Provider,{value:{activeChat:a,startChatFromLot:f,openChatFromList:e=>{var t;if(!h)return;let a=e.participantUids.find(e=>e!==h.uid);if(!a)return void x({variant:"destructive",title:"Помилка чату",description:"Не вдалося визначити співрозмовника."});o({chatId:e.id,lotId:e.lotId,lotName:e.lotName,lotImage:e.lotImage,otherParticipant:{uid:a,username:(null==(t=e.participantInfo[a])?void 0:t.username)||"Співрозмовник"}})},closeChat:()=>{o(null)},isStarting:u},children:t})}function u(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useChat must be used within a ChatProvider");return e}},8224:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},8437:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>c});var r=a(5155),s=a(2115),l=a(3004),n=a(6104),i=a(5317);let d=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[a,c]=(0,s.useState)(null),[o,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{c(e),e||(u(null),x(!1))});return()=>e()},[]),(0,s.useEffect)(()=>{if(a){x(!0);let e=!1,t=(0,i.H9)(n.db,"users",a.uid),r=(0,i.aQ)(t,t=>{t.exists()?(u(t.data()),x(!1)):e||(u(null),x(!1)),e=!0},e=>{console.error("Error subscribing to user document:",e),u(null),x(!1)});return()=>r()}m&&x(!1)},[a]),(0,r.jsx)(d.Provider,{value:{user:a,firestoreUser:o,loading:m},children:t})},o=()=>{let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2596),s=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,848,453,323,874,766,441,684,358],()=>t(2666)),_N_E=e.O()}]);