(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},2346:(e,s,t)=>{"use strict";t.d(s,{w:()=>n});var a=t(5155),r=t(2115),l=t(7489),i=t(9434);let n=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:n=!0,...d}=e;return(0,a.jsx)(l.b,{ref:s,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...d})});n.displayName=l.b.displayName},2558:(e,s,t)=>{"use strict";t.d(s,{Toaster:()=>j});var a=t(5155),r=t(7481),l=t(2115),i=t(6621),n=t(2085),d=t(5318),o=t(9434);let c=i.Kq,m=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.LM,{ref:s,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r})});m.displayName=i.LM.displayName;let u=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),x=l.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)(i.bL,{ref:s,className:(0,o.cn)(u({variant:r}),t),...l})});x.displayName=i.bL.displayName,l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.rc,{ref:s,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r})}).displayName=i.rc.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bm,{ref:s,className:(0,o.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=i.bm.displayName;let f=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.hE,{ref:s,className:(0,o.cn)("text-sm font-semibold",t),...r})});f.displayName=i.hE.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.VY,{ref:s,className:(0,o.cn)("text-sm opacity-90",t),...r})});function j(){let{toasts:e}=(0,r.dj)();return(0,a.jsxs)(c,{children:[e.map(function(e){let{id:s,title:t,description:r,action:l,...i}=e;return(0,a.jsxs)(x,{...i,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[t&&(0,a.jsx)(f,{children:t}),r&&(0,a.jsx)(p,{children:r})]}),l,(0,a.jsx)(h,{})]},s)}),(0,a.jsx)(m,{})]})}p.displayName=i.VY.displayName},5453:(e,s,t)=>{"use strict";t.d(s,{GlobalChatWidget:()=>C});var a=t(5155),r=t(2115),l=t(7817),i=t(6695),n=t(285),d=t(2523),o=t(7655),c=t(9434);let m=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(o.bL,{ref:s,className:(0,c.cn)("relative overflow-hidden",t),...l,children:[(0,a.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(u,{}),(0,a.jsx)(o.OK,{})]})});m.displayName=o.bL.displayName;let u=r.forwardRef((e,s)=>{let{className:t,orientation:r="vertical",...l}=e;return(0,a.jsx)(o.VM,{ref:s,orientation:r,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,a.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});u.displayName=o.VM.displayName;var x=t(5317),h=t(6104),f=t(8437),p=t(8224),j=t(5318),v=t(172),g=t(3672),N=t(1427),b=t(7481),w=t(6766);function y(e){let{chatId:s,lotName:t,lotImage:l,sellerName:o,onClose:c}=e,{user:u}=(0,f.A)(),[y,C]=(0,r.useState)([]),[k,A]=(0,r.useState)(""),[R,L]=(0,r.useState)(!0),[z,U]=(0,r.useState)(!1),I=(0,r.useRef)(null),{toast:E}=(0,b.dj)();(0,r.useEffect)(()=>{if(!s)return;L(!0);let e=(0,x.P)((0,x.rJ)(h.db,"chats/".concat(s,"/messages")),(0,x.My)("timestamp","asc")),t=(0,x.aQ)(e,e=>{C(e.docs.map(e=>({id:e.id,...e.data()}))),L(!1)},e=>{console.error("Error fetching messages: ",e),L(!1),E({variant:"destructive",title:"Помилка",description:"Не вдалося завантажити повідомлення."})});return()=>t()},[s,E]),(0,r.useEffect)(()=>{if(I.current){let e=I.current.querySelector("[data-radix-scroll-area-viewport]");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}},[y]);let P=async e=>{if(e.preventDefault(),""!==k.trim()&&!z){U(!0);try{let e=(0,N.Qg)(h.Cn,"sendMessage");await e({chatId:s,text:k}),A("")}catch(e){E({variant:"destructive",title:"Помилка",description:e.message||"Не вдалося надіслати повідомлення."})}finally{U(!1)}}};return(0,a.jsxs)(i.Zp,{className:"fixed bottom-4 right-4 z-50 w-full max-w-sm h-[500px] flex flex-col shadow-2xl",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between p-3 border-b bg-secondary",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 text-primary"}),(0,a.jsxs)(i.ZB,{className:"text-base font-semibold",children:["Чат з ",o]})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:c,children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(i.Wu,{className:"flex-grow p-0 min-h-0",children:(0,a.jsx)(m,{className:"h-full p-4",ref:I,children:R?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted",children:[(0,a.jsx)(w.default,{src:l||"/placeholder.png",alt:t,width:32,height:32,className:"rounded object-cover"}),(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:t})]}),y.map(e=>(0,a.jsx)("div",{className:"flex items-end gap-2 ".concat(e.senderUid===(null==u?void 0:u.uid)?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"p-2 px-3 rounded-lg max-w-[80%] ".concat(e.senderUid===(null==u?void 0:u.uid)?"bg-primary text-primary-foreground":"bg-accent"),children:(0,a.jsx)("p",{className:"text-sm",children:e.text})})},e.id)),0===y.length&&(0,a.jsx)("p",{className:"text-center text-xs text-muted-foreground py-4",children:"Повідомлень ще немає. Напишіть першим!"})]})})}),(0,a.jsx)(i.wL,{className:"p-2 border-t",children:(0,a.jsxs)("form",{onSubmit:P,className:"w-full flex items-center gap-2",children:[(0,a.jsx)(d.p,{placeholder:"Напишіть повідомлення...",value:k,onChange:e=>A(e.target.value),disabled:z||R,autoComplete:"off"}),(0,a.jsx)(n.$,{type:"submit",size:"icon",disabled:z||R||""===k.trim(),children:z?(0,a.jsx)(v.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})})]})}function C(){let{activeChat:e,closeChat:s}=(0,l.Y)();return e?(0,a.jsx)(y,{chatId:e.chatId,lotName:e.lotName,lotImage:e.lotImage,sellerName:e.otherParticipant.username,onClose:s}):null}},5521:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,5453)),Promise.resolve().then(t.bind(t,6707)),Promise.resolve().then(t.bind(t,7573)),Promise.resolve().then(t.bind(t,2558)),Promise.resolve().then(t.bind(t,8437)),Promise.resolve().then(t.bind(t,7817))},6707:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var a=t(5155),r=t(6874),l=t.n(r),i=t(8186),n=t(6037),d=t(9532),o=t(4815),c=t(1721),m=t(7906);let u=()=>{if(!(0,m.a)())return null;let e=[{href:"/",icon:(0,a.jsx)(i.A,{className:"h-6 w-6"}),label:"Головна"},{href:"/auctions",icon:(0,a.jsx)(n.A,{className:"h-6 w-6"}),label:"Аукціони"},{href:"/sell",icon:(0,a.jsx)(d.A,{className:"h-6 w-6"}),label:"Продати"},{href:"/checkout",icon:(0,a.jsx)(o.A,{className:"h-6 w-6"}),label:"Кошик"},{href:"/profile",icon:(0,a.jsx)(c.A,{className:"h-6 w-6"}),label:"Профіль"}];return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 border-t border-border/50 bg-background/90 backdrop-blur-md shadow-t-lg md:hidden",children:(0,a.jsx)("div",{className:"container mx-auto flex h-16 items-center justify-around px-2",children:e.map(e=>(0,a.jsxs)(l(),{href:e.href,className:"flex flex-col items-center justify-center text-muted-foreground hover:text-primary transition-colors p-1","aria-label":e.label,children:[e.icon,(0,a.jsx)("span",{className:"text-xs mt-0.5",children:e.label})]},e.href))})})}},7573:(e,s,t)=>{"use strict";t.d(s,{default:()=>Y});var a=t(5155),r=t(6874),l=t.n(r),i=t(8434),n=t(2523),d=t(285),o=t(1394),c=t(469),m=t(1721),u=t(8390),x=t(3349),h=t(172),f=t(8341),p=t(5074),j=t(2115),v=t(8698),g=t(3158),N=t(518),b=t(154),w=t(9434);let y=v.bL,C=v.l9;v.YJ,v.ZL,v.Pb,v.z6,j.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...i}=e;return(0,a.jsxs)(v.ZP,{ref:s,className:(0,w.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...i,children:[l,(0,a.jsx)(g.A,{className:"ml-auto"})]})}).displayName=v.ZP.displayName,j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v.G5,{ref:s,className:(0,w.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=v.G5.displayName;let k=j.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,a.jsx)(v.ZL,{children:(0,a.jsx)(v.UC,{ref:s,sideOffset:r,className:(0,w.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});k.displayName=v.UC.displayName;let A=j.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(v.q7,{ref:s,className:(0,w.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l})});A.displayName=v.q7.displayName,j.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...i}=e;return(0,a.jsxs)(v.H_,{ref:s,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(v.VF,{children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})}),r]})}).displayName=v.H_.displayName,j.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(v.hN,{ref:s,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(v.VF,{children:(0,a.jsx)(b.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=v.hN.displayName;let R=j.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(v.JU,{ref:s,className:(0,w.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});R.displayName=v.JU.displayName;let L=j.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(v.wv,{ref:s,className:(0,w.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});L.displayName=v.wv.displayName;var z=t(8382),U=t(7906),I=t(2346),E=t(8437),P=t(6104),S=t(3004),_=t(7481),$=t(8856),F=t(4165),M=t(7313),V=t(5057),G=t(7104);function J(){let[e,s]=(0,j.useState)(!1),[t,r]=(0,j.useState)(""),[l,i]=(0,j.useState)(""),[o,c]=(0,j.useState)(null),m=async()=>{try{await (0,S.eJ)(P.j2,t,l),s(!1)}catch(e){c(e.message)}},u=async()=>{try{await (0,S.x9)(P.j2,t,l),s(!1)}catch(e){c(e.message)}},x=async()=>{let e=new S.HF;try{await (0,S.df)(P.j2,e),s(!1)}catch(e){c(e.message)}};return(0,a.jsxs)(F.lG,{open:e,onOpenChange:s,children:[(0,a.jsx)(F.zM,{asChild:!0,children:(0,a.jsxs)(d.$,{children:[(0,a.jsx)(G.A,{className:"mr-2 h-5 w-5"})," Увійти"]})}),(0,a.jsxs)(F.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(F.c7,{children:(0,a.jsx)(F.L3,{children:"Автентифікація"})}),(0,a.jsxs)(M.tU,{defaultValue:"signin",className:"w-full",children:[(0,a.jsxs)(M.j7,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(M.Xi,{value:"signin",children:"Вхід"}),(0,a.jsx)(M.Xi,{value:"signup",children:"Реєстрація"})]}),(0,a.jsx)(M.av,{value:"signin",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(V.Label,{htmlFor:"email-signin",children:"Email"}),(0,a.jsx)(n.p,{id:"email-signin",type:"email",placeholder:"m@example.com",value:t,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(V.Label,{htmlFor:"password-signin",children:"Пароль"}),(0,a.jsx)(n.p,{id:"password-signin",type:"password",value:l,onChange:e=>i(e.target.value)})]}),o&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:o}),(0,a.jsx)(d.$,{className:"w-full",onClick:u,children:"Увійти"}),(0,a.jsx)(d.$,{variant:"outline",className:"w-full",onClick:x,children:"Увійти з Google"})]})}),(0,a.jsx)(M.av,{value:"signup",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(V.Label,{htmlFor:"email-signup",children:"Email"}),(0,a.jsx)(n.p,{id:"email-signup",type:"email",placeholder:"m@example.com",value:t,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(V.Label,{htmlFor:"password-signup",children:"Пароль"}),(0,a.jsx)(n.p,{id:"password-signup",type:"password",value:l,onChange:e=>i(e.target.value)})]}),o&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:o}),(0,a.jsx)(d.$,{className:"w-full",onClick:m,children:"Зареєструватися"}),(0,a.jsx)(d.$,{variant:"outline",className:"w-full",onClick:x,children:"Зареєструватися з Google"})]})})]})]})]})}let O=[{href:"/",label:"Головна"},{href:"/auctions",label:"Аукціони"},{href:"/sell",label:"Продати"}],Y=()=>{let e=(0,U.a)(),[s,t]=j.useState(!1),{user:r,firestoreUser:v,loading:g}=(0,E.A)(),{toast:N}=(0,_.dj)(),b=async()=>{let s=new S.HF;try{await (0,S.df)(P.j2,s),N({title:"Успішний вхід!",description:"Ласкаво просимо!"}),e&&t(!1)}catch(e){"auth/popup-closed-by-user"!==e.code&&(console.error("Помилка входу:",e),N({variant:"destructive",title:"Помилка входу",description:"Не вдалося увійти. Спробуйте ще раз."}))}},w=async()=>{try{await (0,S.CI)(P.j2),N({title:"Ви вийшли з системи."}),e&&t(!1)}catch(e){console.error("Помилка виходу:",e),N({variant:"destructive",title:"Помилка виходу",description:"Не вдалося вийти з системи."})}},F=()=>{var e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(C,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,a.jsxs)(o.eu,{children:[(0,a.jsx)(o.BK,{src:(null==r?void 0:r.photoURL)||void 0,alt:(null==v?void 0:v.username)||"User"}),(0,a.jsx)(o.q5,{children:(null==v||null==(e=v.username)?void 0:e[0].toUpperCase())||"U"})]})})}),(0,a.jsxs)(k,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(R,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:null==v?void 0:v.username}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==r?void 0:r.email})]})}),(0,a.jsx)(L,{}),(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/dashboard",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Панель керування"]})}),(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/profile",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Профіль"]})}),(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/balance",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Баланс"]})}),(0,a.jsx)(L,{}),(0,a.jsxs)(A,{onClick:w,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Вийти"]})]})]})},M=()=>{if(g)return e?(0,a.jsx)(h.A,{className:"h-6 w-6 animate-spin"}):(0,a.jsx)($.E,{className:"h-10 w-24 rounded-md"});if(r)if(v)return e?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(z.kN,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/dashboard",className:"flex items-center p-2 rounded-md hover:bg-secondary text-foreground hover:text-primary",children:[(0,a.jsx)(c.A,{className:"mr-2 h-5 w-5"})," Панель керування"]})}),(0,a.jsx)(z.kN,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/profile",className:"flex items-center p-2 rounded-md hover:bg-secondary text-foreground hover:text-primary",children:[(0,a.jsx)(m.A,{className:"mr-2 h-5 w-5"})," Профіль"]})}),(0,a.jsxs)(d.$,{variant:"ghost",onClick:w,className:"w-full justify-start p-2 text-foreground hover:text-destructive",children:[(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5"})," Вийти"]})]}):(0,a.jsx)(F,{});else{var s,t;return e?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"Профіль завантажується..."}),(0,a.jsx)(z.kN,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/profile",className:"flex items-center p-2 rounded-md hover:bg-secondary text-foreground hover:text-primary",children:[(0,a.jsx)(m.A,{className:"mr-2 h-5 w-5"})," Профіль (дані оновлюються)"]})}),(0,a.jsxs)(d.$,{variant:"ghost",onClick:w,className:"w-full justify-start p-2 text-foreground hover:text-destructive",children:[(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5"})," Вийти"]})]}):(0,a.jsxs)(y,{children:[(0,a.jsx)(C,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,a.jsxs)(o.eu,{children:[(0,a.jsx)(o.BK,{src:(null==r?void 0:r.photoURL)||void 0,alt:(null==r?void 0:r.displayName)||"User"}),(0,a.jsx)(o.q5,{children:(null==r||null==(s=r.displayName)?void 0:s[0].toUpperCase())||(null==r||null==(t=r.email)?void 0:t[0].toUpperCase())||"U"})]})})}),(0,a.jsxs)(k,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(R,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==r?void 0:r.displayName)||"Користувач"}),(null==r?void 0:r.email)&&(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:r.email}),(0,a.jsx)("p",{className:"text-xs leading-none text-amber-600 dark:text-amber-400",children:"Дані профілю оновлюються..."})]})}),(0,a.jsx)(L,{}),(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(l(),{href:"/profile",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Профіль"]})}),(0,a.jsx)(L,{}),(0,a.jsxs)(A,{onClick:w,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Вийти"]})]})]})}return(0,a.jsx)(J,{handleSignIn:b,isMobile:e})};return(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full bg-background/80 backdrop-blur-md border-b border-border/50 shadow-sm",children:(0,a.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,a.jsx)(l(),{href:"/",className:"flex items-center text-primary hover:opacity-80 transition-opacity",children:(0,a.jsx)(i.A,{className:"h-12 w-12"})}),e?(0,a.jsxs)(z.cj,{open:s,onOpenChange:t,children:[(0,a.jsx)(z.CG,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"ghost",size:"icon",children:[" ",(0,a.jsx)(f.A,{})," ",(0,a.jsx)("span",{className:"sr-only",children:"Відкрити меню"})]})}),(0,a.jsxs)(z.h,{side:"left",className:"w-[300px] sm:w-[400px] bg-background p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,a.jsx)(n.p,{type:"search",placeholder:"Пошук лотів...",className:"pl-10"})]}),(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:O.map(e=>(0,a.jsx)(z.kN,{asChild:!0,children:(0,a.jsx)(l(),{href:e.href,className:"block p-2 rounded-md hover:bg-secondary text-foreground hover:text-primary",children:e.label})},e.href))}),(0,a.jsx)(I.w,{className:"my-4"}),(0,a.jsx)("div",{className:"mt-auto",children:(0,a.jsx)(M,{})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1 max-w-md ml-8",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,a.jsx)(n.p,{type:"search",placeholder:"Пошук лотів, категорій...",className:"pl-10 bg-card"})]})}),(0,a.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:O.map(e=>(0,a.jsx)(d.$,{variant:"ghost",asChild:!0,className:"text-foreground hover:text-primary",children:(0,a.jsx)(l(),{href:e.href,children:e.label})},e.href))}),(0,a.jsx)("div",{className:"hidden md:flex items-center gap-2",children:(0,a.jsx)(M,{})})]})]})})}},7817:(e,s,t)=>{"use strict";t.d(s,{ChatProvider:()=>c,Y:()=>m});var a=t(5155),r=t(2115),l=t(1427),i=t(6104),n=t(7481),d=t(8437);let o=(0,r.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),{toast:x}=(0,n.dj)(),{user:h}=(0,d.A)(),f=async e=>{if((null==t?void 0:t.chatId)!=="".concat(e.lotId,"_").concat(null==h?void 0:h.uid)){u(!0);try{let s=(0,l.Qg)(i.Cn,"startOrGetChat"),{chatId:t}=(await s({lotId:e.lotId})).data;c({chatId:t,lotId:e.lotId,lotName:e.lotName,lotImage:e.lotImage,otherParticipant:{uid:e.sellerUid,username:e.sellerName}})}catch(e){x({variant:"destructive",title:"Помилка чату",description:e.message||"Не вдалося почати чат."}),c(null)}finally{u(!1)}}};return(0,a.jsx)(o.Provider,{value:{activeChat:t,startChatFromLot:f,openChatFromList:e=>{var s;if(!h)return;let t=e.participantUids.find(e=>e!==h.uid);if(!t)return void x({variant:"destructive",title:"Помилка чату",description:"Не вдалося визначити співрозмовника."});c({chatId:e.id,lotId:e.lotId,lotName:e.lotName,lotImage:e.lotImage,otherParticipant:{uid:t,username:(null==(s=e.participantInfo[t])?void 0:s.username)||"Співрозмовник"}})},closeChat:()=>{c(null)},isStarting:m},children:s})}function m(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useChat must be used within a ChatProvider");return e}},7906:(e,s,t)=>{"use strict";t.d(s,{a:()=>r});var a=t(2115);function r(){let[e,s]=a.useState(void 0);return a.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{s(window.innerWidth<768)};return e.addEventListener("change",t),s(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}},8382:(e,s,t)=>{"use strict";t.d(s,{CG:()=>c,cj:()=>o,h:()=>f,kN:()=>m});var a=t(5155),r=t(2115),l=t(5452),i=t(2085),n=t(5318),d=t(9434);let o=l.bL,c=l.l9,m=l.bm,u=l.ZL,x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});x.displayName=l.hJ.displayName;let h=(0,i.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=r.forwardRef((e,s)=>{let{side:t="right",className:r,children:i,...o}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,d.cn)(h({side:t}),r),...o,children:[i,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,d.cn)("text-lg font-semibold text-foreground",t),...r})}).displayName=l.hE.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})}).displayName=l.VY.displayName},8434:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(5155),r=t(6766),l=t(9434);let i=e=>{let{className:s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("relative",s),children:(0,a.jsx)(r.default,{src:"/logo.png",alt:"ReefUA Logo",fill:!0,sizes:"48px",priority:!0})})}},8856:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(5155),r=t(9434);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}}},e=>{var s=s=>e(e.s=s);e.O(0,[690,992,644,848,453,323,874,508,766,205,452,313,418,218,441,684,358],()=>s(5521)),_N_E=e.O()}]);